<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explorador Interactivo de Paneles Fotovoltaicos</title>
    <meta name="description" content="Descubre todo sobre paneles fotovoltaicos, su funcionamiento, tipos, rendimiento, aplicaciones, impacto econ√≥mico y futuro. ¬°Tu gu√≠a interactiva de energ√≠a solar!">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Application Structure Plan: The SPA will use a thematic, multi-section layout navigated by a fixed top navigation bar. Key sections will include:
    1. Inicio: Overview.
    2. Fundamentos: How PV works, system components (visual diagram).
    3. Tipos de Paneles: Interactive comparison of panel technologies (using Chart.js for efficiency/lifespan) and detailed views.
    4. Rendimiento y Factores: Explanation of irradiation, temperature, orientation, shading with illustrative charts.
    5. Aplicaciones Diversas: Showcasing residential, industrial, off-grid, large-scale (Chart.js for plant capacities), and innovative uses (BIPV, flotante, etc.) through categorized content and visuals.
    6. Sostenibilidad: Lifecycle impact (Chart.js for conceptual impact stages) and recycling.
    7. Econom√≠a Solar: Costs, ROI, savings (Chart.js for financial comparisons), and incentives.
    8. Futuro de la Solar: Emerging tech and trends.
    9. Contacto: New section for direct email inquiries.
    This structure is chosen to guide the user logically from basic understanding to specific applications, economic considerations, and future outlook, making the comprehensive report content digestible and engaging. Interactions will focus on revealing details on demand and visualizing comparisons. The new Contact section provides a direct communication channel. -->
    <!-- Visualization & Content Choices:
    * Report Info: Panel Types (Sec 3, Table 1) -> Goal: Compare -> Viz: Bar chart (Chart.js) for Efficiency, Lifespan; Interactive HTML table/cards for details. Interaction: Select panel type to view details. Justification: Easy comparison of key metrics.
    * Report Info: Funcionamiento (Sec 2) -> Goal: Explain -> Viz: HTML/CSS diagram with Unicode icons for photovoltaic effect & system components. Interaction: Static visual flow. Justification: Clear visual explanation of core concepts.
    * Report Info: Factores de Rendimiento (Sec 4, Table 2) -> Goal: Inform -> Viz: Line chart (Chart.js) for Temp vs. Efficiency; Text summaries for other factors, enhanced with Unicode icons. Interaction: Static chart. Justification: Visualize key performance influencer.
    * Report Info: Plantas Solares (Sec 5, Table 3) -> Goal: Showcase Scale -> Viz: Bar chart (Chart.js) for Plant Capacities; List/cards for details. Interaction: Static chart. Justification: Illustrate magnitude of large projects.
    * Report Info: Impacto Ambiental (Sec 6, Table 4) -> Goal: Summarize -> Viz: Bar chart (Chart.js) for conceptual lifecycle impacts (positive/negative per stage), enhanced with Unicode icons. Interaction: Static chart. Justification: Visual overview of environmental aspects.
    * Report Info: Aspectos Econ√≥micos (Sec 7, Table 5) -> Goal: Analyze -> Viz: Bar chart (Chart.js) for Cost/ROI/Amortizaci√≥n by installation type, enhanced with Unicode icons. Interaction: Static chart. Justification: Clear financial comparison.
    * Report Info: Textual Summaries (all sections) -> Goal: Inform/Contextualize -> Viz: Structured HTML with Tailwind, collapsible sections. Interaction: Expand/collapse for details. Justification: Manage information density.
    * Report Info: User Questions (New Section) -> Goal: Provide direct contact -> Viz: HTML form linked to mailto. Interaction: User fills form, clicks submit to open email client. Justification: Offers a direct, reliable communication channel. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        .nav-link { transition: all 0.3s ease; }
        .nav-link.active { color: #f59e0b; border-bottom-color: #f59e0b; }
        .content-section { display: none; }
        .content-section.active { display: block; }
        .tab-button { transition: background-color 0.3s ease, color 0.3s ease; }
        .tab-button.active { background-color: #f59e0b; color: white; }
        .card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); }
        .tooltip { position: relative; display: inline-block; }
        .tooltip .tooltiptext { visibility: hidden; width: 220px; background-color: #555; color: #fff; text-align: center; border-radius: 6px; padding: 5px 0; position: absolute; z-index: 1; bottom: 125%; left: 50%; margin-left: -110px; opacity: 0; transition: opacity 0.3s; }
        .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
        .modal { display: none; position: fixed; z-index: 50; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); }
        .modal-content { background-color: #fefefe; margin: 10% auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 700px; border-radius: 0.5rem; position: relative; }
        .close-button { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
        .close-button:hover, .close-button:focus { color: black; text-decoration: none; cursor: pointer; }
        .icon-large { font-size: 4rem; line-height: 1; margin-bottom: 0.5rem; }
        .icon-medium { font-size: 3rem; line-height: 1; margin-bottom: 0.5rem; }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

    <header class="bg-sky-700 text-white shadow-lg sticky top-0 z-40">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <h1 class="text-2xl font-bold">Paneles Fotovoltaicos: Un An√°lisis Interactivo</h1>
                <nav class="hidden md:flex space-x-4">
                    <a href="#inicio" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-sky-600 active" data-section="inicio">Inicio</a>
                    <a href="#fundamentos" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-sky-600" data-section="fundamentos">Fundamentos</a>
                    <a href="#tipos" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-sky-600" data-section="tipos">Tipos</a>
                    <a href="#rendimiento" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-sky-600" data-section="rendimiento">Rendimiento</a>
                    <a href="#aplicaciones" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-sky-600" data-section="aplicaciones">Aplicaciones</a>
                    <a href="#sostenibilidad" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-sky-600" data-section="sostenibilidad">Sostenibilidad</a>
                    <a href="#economia" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-sky-600" data-section="economia">Econom√≠a</a>
                    <a href="#futuro" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-sky-600" data-section="futuro">Futuro</a>
                    <a href="#contacto" class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-sky-600" data-section="contacto">Contacto üìß</a>
                </nav>
                <button id="mobile-menu-button" class="md:hidden p-2 rounded-md text-gray-200 hover:text-white hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
                    <span class="sr-only">Abrir men√∫ principal</span>
                    <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                    </svg>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="md:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#inicio" class="nav-link block px-3 py-2 rounded-md text-base font-medium hover:bg-sky-600 active" data-section="inicio">Inicio</a>
                <a href="#fundamentos" class="nav-link block px-3 py-2 rounded-md text-base font-medium hover:bg-sky-600" data-section="fundamentos">Fundamentos</a>
                <a href="#tipos" class="nav-link block px-3 py-2 rounded-md text-base font-medium hover:bg-sky-600" data-section="tipos">Tipos</a>
                <a href="#rendimiento" class="nav-link block px-3 py-2 rounded-md text-base font-medium hover:bg-sky-600" data-section="rendimiento">Rendimiento</a>
                <a href="#aplicaciones" class="nav-link block px-3 py-2 rounded-md text-base font-medium hover:bg-sky-600" data-section="aplicaciones">Aplicaciones</a>
                <a href="#sostenibilidad" class="nav-link block px-3 py-2 rounded-md text-base font-medium hover:bg-sky-600" data-section="sostenibilidad">Sostenibilidad</a>
                <a href="#economia" class="nav-link block px-3 py-2 rounded-md text-base font-medium hover:bg-sky-600" data-section="economia">Econom√≠a</a>
                <a href="#futuro" class="nav-link block px-3 py-2 rounded-md text-base font-medium hover:bg-sky-600" data-section="futuro">Futuro</a>
                <a href="#contacto" class="nav-link block px-3 py-2 rounded-md text-base font-medium hover:bg-sky-600" data-section="contacto">Contacto üìß</a>
            </div>
        </div>
    </header>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8">
        
        <section id="inicio" class="content-section active">
            <div class="bg-white shadow-xl rounded-lg p-6 mb-8 text-center">
                <h2 class="text-3xl font-bold text-sky-700 mb-4">Bienvenido al Explorador de Energ√≠a Solar Fotovoltaica</h2>
                <div class="flex justify-center items-center mb-6">
                    <span class="icon-large text-amber-500">‚òÄÔ∏è</span>
                </div>
                <p class="text-lg mb-4">La energ√≠a solar fotovoltaica (FV) es una tecnolog√≠a clave en la transici√≥n hacia un futuro energ√©tico m√°s limpio y sostenible. Convierte la luz solar directamente en electricidad, ofreciendo una alternativa crucial a los combustibles f√≥siles.</p>
                <p class="mb-4">Este explorador interactivo te guiar√° a trav√©s de los aspectos fundamentales de los paneles fotovoltaicos, desde su funcionamiento b√°sico y los diferentes tipos existentes, hasta su impacto econ√≥mico y ambiental, y las emocionantes innovaciones que est√°n por venir. Utiliza la navegaci√≥n para explorar cada secci√≥n y descubrir c√≥mo la energ√≠a solar est√° transformando nuestro mundo.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                    <div class="bg-amber-100 p-4 rounded-lg shadow">
                        <span class="text-4xl">‚ú®</span>
                        <h3 class="font-semibold text-amber-700 mt-2">Fuente Limpia</h3>
                        <p class="text-sm text-slate-600">Genera electricidad sin emisiones directas.</p>
                    </div>
                    <div class="bg-emerald-100 p-4 rounded-lg shadow">
                        <span class="text-4xl">üöÄ</span>
                        <h3 class="font-semibold text-emerald-700 mt-2">Tecnolog√≠a en Evoluci√≥n</h3>
                        <p class="text-sm text-slate-600">Constante innovaci√≥n para mayor eficiencia y menor costo.</p>
                    </div>
                    <div class="bg-sky-100 p-4 rounded-lg shadow">
                        <span class="text-4xl">üåç</span>
                        <h3 class="font-semibold text-sky-700 mt-2">Impacto Global</h3>
                        <p class="text-sm text-slate-600">Clave para la mitigaci√≥n del cambio clim√°tico.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="fundamentos" class="content-section">
            <div class="bg-white shadow-xl rounded-lg p-6 mb-8">
                <h2 class="text-3xl font-bold text-sky-700 mb-4">Principios Fundamentales y Funcionamiento</h2>
                <p class="text-lg mb-4">Los paneles solares operan gracias al <strong class="text-amber-600">efecto fotovoltaico</strong>: la conversi√≥n directa de luz solar (fotones) en electricidad. Este proceso ocurre en las celdas solares, com√∫nmente hechas de silicio.</p>
                
                <div class="bg-slate-50 p-4 rounded-lg mb-6 shadow">
                    <h3 class="text-xl font-semibold text-sky-600 mb-2">El Efecto Fotovoltaico: Paso a Paso</h3>
                    <ol class="list-decimal list-inside space-y-2 text-slate-700">
                        <li><strong class="text-amber-500">Incidencia de Fotones:</strong> Part√≠culas de luz solar golpean el material semiconductor (ej. silicio).</li>
                        <li><strong class="text-amber-500">Liberaci√≥n de Electrones:</strong> Los fotones excitan y liberan electrones de sus √°tomos.</li>
                        <li><strong class="text-amber-500">Creaci√≥n de Corriente:</strong> Los electrones liberados fluyen, generando una corriente el√©ctrica (Corriente Continua - CC).</li>
                        <li><strong class="text-amber-500">Conversi√≥n a CA:</strong> Un inversor transforma la CC en Corriente Alterna (CA), utilizable en hogares y la red.</li>
                    </ol>
                </div>
                <div class="flex justify-center items-center mb-6">
                    <span class="icon-large text-sky-500">‚ö°</span>
                </div>

                <div class="my-6 p-4 bg-sky-50 rounded-lg shadow">
                    <h3 class="text-xl font-semibold text-sky-600 mb-3">Visualizaci√≥n del Proceso</h3>
                    <div class="flex flex-col md:flex-row items-center justify-around p-4 bg-white rounded-lg border border-sky-200">
                        <div class="text-center mb-4 md:mb-0">
                            <span class="text-5xl">‚òÄÔ∏è</span>
                            <p class="mt-1 font-medium text-amber-600">Luz Solar (Fotones)</p>
                        </div>
                        <div class="text-3xl text-sky-500 mx-4">‚û°Ô∏è</div>
                        <div class="text-center p-3 border-2 border-slate-300 rounded-lg bg-slate-200 shadow-inner mb-4 md:mb-0">
                            <span class="text-3xl">üîã</span>
                            <p class="mt-1 font-medium text-slate-700">Panel Solar (Celdas de Silicio)</p>
                            <p class="text-xs text-slate-500">Electrones se liberan</p>
                        </div>
                        <div class="text-3xl text-sky-500 mx-4">‚û°Ô∏è</div>
                        <div class="text-center mb-4 md:mb-0">
                             <span class="text-3xl">‚ö°</span>
                            <p class="mt-1 font-medium text-sky-600">Corriente Continua (CC)</p>
                        </div>
                        <div class="text-3xl text-sky-500 mx-4">‚û°Ô∏è</div>
                        <div class="text-center p-3 border-2 border-slate-300 rounded-lg bg-slate-200 shadow-inner mb-4 md:mb-0">
                            <span class="text-3xl">üîÑ</span>
                            <p class="mt-1 font-medium text-slate-700">Inversor</p>
                        </div>
                        <div class="text-3xl text-sky-500 mx-4">‚û°Ô∏è</div>
                        <div class="text-center">
                            <span class="text-3xl">üí°üè†</span>
                            <p class="mt-1 font-medium text-emerald-600">Corriente Alterna (CA)</p>
                            <p class="text-xs text-slate-500">Uso en hogar / Red</p>
                        </div>
                    </div>
                </div>
                
                <h3 class="text-2xl font-semibold text-sky-600 mt-6 mb-3">Componentes Clave de un Sistema Fotovoltaico</h3>
                <p class="mb-4">Un sistema fotovoltaico es m√°s que solo paneles. Incluye varios componentes esenciales que trabajan juntos:</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="card bg-white p-4 rounded-lg border border-slate-200 shadow-md">
                        <h4 class="font-bold text-lg text-sky-700">Paneles Solares (M√≥dulos FV)</h4>
                        <p class="text-sm text-slate-600">Capturan la luz solar y la convierten en electricidad CC.</p>
                    </div>
                    <div class="card bg-white p-4 rounded-lg border border-slate-200 shadow-md">
                        <h4 class="font-bold text-lg text-sky-700">Inversor Solar</h4>
                        <p class="text-sm text-slate-600">Convierte la electricidad CC de los paneles en CA utilizable.</p>
                    </div>
                    <div class="card bg-white p-4 rounded-lg border border-slate-200 shadow-md">
                        <h4 class="font-bold text-lg text-sky-700">Bater√≠as Solares (Opcional)</h4>
                        <p class="text-sm text-slate-600">Almacenan el exceso de energ√≠a para uso posterior (noches, d√≠as nublados).</p>
                    </div>
                    <div class="card bg-white p-4 rounded-lg border border-slate-200 shadow-md">
                        <h4 class="font-bold text-lg text-sky-700">Regulador de Carga</h4>
                        <p class="text-sm text-slate-600">Protege las bater√≠as de sobrecargas y sobredescargas (en sistemas con bater√≠as).</p>
                    </div>
                    <div class="card bg-white p-4 rounded-lg border border-slate-200 shadow-md">
                        <h4 class="font-bold text-lg text-sky-700">Estructuras de Montaje</h4>
                        <p class="text-sm text-slate-600">Sostienen los paneles en la orientaci√≥n e inclinaci√≥n √≥ptimas.</p>
                    </div>
                    <div class="card bg-white p-4 rounded-lg border border-slate-200 shadow-md">
                        <h4 class="font-bold text-lg text-sky-700">Cableado y Protecciones</h4>
                        <p class="text-sm text-slate-600">Conectan los componentes y protegen el sistema contra fallos el√©ctricos.</p>
                    </div>
                </div>
                <p class="mt-6 text-sm italic text-slate-500">La interdependencia de estos componentes es crucial. Por ejemplo, la elecci√≥n del inversor (de cadena vs. microinversores) afecta c√≥mo el sombreado impacta la producci√≥n total. Un dise√±o de sistema hol√≠stico es esencial para maximizar la eficiencia y la rentabilidad.</p>
            </div>
        </section>

        <section id="tipos" class="content-section">
            <div class="bg-white shadow-xl rounded-lg p-6 mb-8">
                <h2 class="text-3xl font-bold text-sky-700 mb-4">Tipos de Paneles Fotovoltaicos</h2>
                <p class="text-lg mb-4">La tecnolog√≠a fotovoltaica ofrece diversos tipos de paneles, cada uno con sus propias caracter√≠sticas, ventajas y desaf√≠os. La elecci√≥n depende de factores como la eficiencia deseada, el presupuesto, el espacio disponible y las condiciones ambientales.</p>
                
                <div class="mb-6">
                    <div class="chart-container mx-auto h-64 md:h-96">
                        <canvas id="panelEfficiencyChart"></canvas>
                    </div>
                    <p class="text-center text-sm text-slate-500 mt-2">Comparaci√≥n de rangos de eficiencia t√≠picos. Las tecnolog√≠as emergentes pueden tener rangos m√°s amplios y eficiencias de laboratorio m√°s altas.</p>
                </div>

                <div id="panelTypesContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    </div>
                <p class="mt-6 text-sm italic text-slate-500">La elecci√≥n del panel solar implica un equilibrio entre eficiencia, costo y durabilidad. No hay una soluci√≥n √∫nica "superior"; la opci√≥n √≥ptima depende de las prioridades de cada proyecto.</p>
            </div>
        </section>
        
        <div id="panelDetailModal" class="modal">
            <div class="modal-content">
                <span class="close-button" onclick="closeModal('panelDetailModal')">&times;</span>
                <h3 id="modalPanelName" class="text-2xl font-bold text-sky-700 mb-3"></h3>
                <p class="mb-2"><strong>Material Principal:</strong> <span id="modalPanelMaterial"></span></p>
                <p class="mb-2"><strong>Caracter√≠sticas Clave:</strong> <span id="modalPanelFeatures"></span></p>
                <p class="mb-2"><strong>Rango de Eficiencia (%):</strong> <span id="modalPanelEfficiency"></span></p>
                <p class="mb-2"><strong>Vida √ötil Estimada (a√±os):</strong> <span id="modalPanelLifespan"></span></p>
                <p class="mb-2"><strong>Costo Relativo:</strong> <span id="modalPanelCost"></span></p>
                <p class="mb-2"><strong>Aplicaciones T√≠picas:</strong> <span id="modalPanelApplications"></span></p>
                <p class="mb-2"><strong>Ventajas:</strong> <span id="modalPanelAdvantages"></span></p>
                <p class="mb-4"><strong>Desaf√≠os:</strong> <span id="modalPanelChallenges"></span></p>
            </div>
        </div>


        <section id="rendimiento" class="content-section">
            <div class="bg-white shadow-xl rounded-lg p-6 mb-8">
                <h2 class="text-3xl font-bold text-sky-700 mb-4">Factores que Influyen en el Rendimiento</h2>
                <p class="text-lg mb-4">La eficiencia de un panel solar no solo depende de su tecnolog√≠a, sino tambi√©n de factores ambientales y de dise√±o. Comprenderlos es clave para optimizar la producci√≥n de energ√≠a.</p>
                <div class="flex justify-center items-center mb-6">
                    <span class="icon-large text-amber-500">üìà</span>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="card bg-slate-50 p-5 rounded-lg shadow">
                        <h3 class="text-xl font-semibold text-sky-600 mb-2">‚òÄÔ∏è Irradiaci√≥n Solar</h3>
                        <p class="text-sm text-slate-700">Es la cantidad de luz solar que llega al panel. Incluye radiaci√≥n directa, difusa (d√≠as nublados) y reflejada (albedo). Factores como latitud, altitud y clima local son determinantes.</p>
                    </div>
                    <div class="card bg-slate-50 p-5 rounded-lg shadow">
                        <h3 class="text-xl font-semibold text-sky-600 mb-2">üå°Ô∏è Temperatura</h3>
                        <p class="text-sm text-slate-700">Ir√≥nicamente, el calor excesivo <strong class="text-red-600">reduce</strong> la eficiencia. La temperatura √≥ptima es ~25¬∞C. Por cada grado por encima, la eficiencia puede bajar 0.3-0.5%. El calor tambi√©n acelera la degradaci√≥n.</p>
                    </div>
                    <div class="card bg-slate-50 p-5 rounded-lg shadow">
                        <h3 class="text-xl font-semibold text-sky-600 mb-2">üß≠ Orientaci√≥n e Inclinaci√≥n</h3>
                        <p class="text-sm text-slate-700">Cruciales para maximizar la captaci√≥n. En el hemisferio norte, idealmente al sur; en el sur, al norte. La inclinaci√≥n var√≠a con la latitud y estaci√≥n (ej. 30¬∞ en Espa√±a).</p>
                    </div>
                    <div class="card bg-slate-50 p-5 rounded-lg shadow">
                        <h3 class="text-xl font-semibold text-sky-600 mb-2">üå≥ Sombreado Parcial</h3>
                        <p class="text-sm text-slate-700">Sombras de √°rboles o edificios pueden reducir el rendimiento hasta un 35%. Soluciones: microinversores, optimizadores de potencia, dise√±o cuidadoso.</p>
                    </div>
                </div>
                
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-sky-600 mb-2 text-center">Impacto de la Temperatura en la Eficiencia</h3>
                    <div class="chart-container mx-auto h-64 md:h-80">
                        <canvas id="temperatureEfficiencyChart"></canvas>
                    </div>
                    <p class="text-center text-sm text-slate-500 mt-2">Ilustraci√≥n conceptual de c√≥mo la eficiencia disminuye al aumentar la temperatura del panel por encima de los 25¬∞C.</p>
                </div>
                <p class="mt-6 text-sm italic text-slate-500">La optimizaci√≥n del rendimiento requiere un an√°lisis detallado del sitio y un dise√±o inteligente que considere la interacci√≥n de todos estos factores. La eficiencia nominal (STC) rara vez se alcanza en condiciones reales.</p>
            </div>
        </section>

        <section id="aplicaciones" class="content-section">
            <div class="bg-white shadow-xl rounded-lg p-6 mb-8">
                <h2 class="text-3xl font-bold text-sky-700 mb-4">Aplicaciones de la Energ√≠a Solar FV</h2>
                <p class="text-lg mb-4">La versatilidad de la energ√≠a fotovoltaica ha permitido su expansi√≥n a una amplia gama de sectores y usos, desde el hogar hasta proyectos masivos e innovaciones sorprendentes.</p>

                <div class="mb-6">
                    <div class="flex border-b border-slate-300">
                        <button class="tab-button flex-1 py-2 px-4 text-slate-600 hover:bg-amber-100 active" onclick="openAppTab(event, 'tradicionales')">Tradicionales</button>
                        <button class="tab-button flex-1 py-2 px-4 text-slate-600 hover:bg-amber-100" onclick="openAppTab(event, 'granEscala')">Gran Escala</button>
                        <button class="tab-button flex-1 py-2 px-4 text-slate-600 hover:bg-amber-100" onclick="openAppTab(event, 'innovadoras')">Innovadoras</button>
                    </div>

                    <div id="tradicionales" class="app-tab-content mt-6">
                        <h3 class="text-2xl font-semibold text-sky-600 mb-3">Residencial, Comercial e Industrial</h3>
                        <div class="flex justify-center items-center mb-6">
                            <span class="icon-large text-emerald-600">üè†</span>
                        </div>
                        <p class="mb-4">En <strong class="text-amber-600">hogares</strong>, para autoconsumo (luces, electrodom√©sticos, climatizaci√≥n). En <strong class="text-amber-600">empresas e industrias</strong>, para reducir costos operativos en naves, procesamiento de alimentos, agricultura (riego, iluminaci√≥n), etc.</p>
                        <h4 class="text-xl font-semibold text-sky-600 mt-4 mb-2">Sistemas Aislados (Off-Grid)</h4>
                        <p class="mb-1">Autosuficiencia energ√©tica total, cruciales para zonas rurales, remotas, granjas, caravanas. Requieren bater√≠as.</p>
                        <p class="text-sm text-slate-600"><strong>Beneficios:</strong> Energ√≠a en √°reas remotas, ahorro a largo plazo, independencia. <strong>Desaf√≠os:</strong> Mayor costo inicial (bater√≠as), espacio, mantenimiento.</p>
                    </div>

                    <div id="granEscala" class="app-tab-content mt-6" style="display:none;">
                        <h3 class="text-2xl font-semibold text-sky-600 mb-3">Plantas Solares a Gran Escala</h3>
                        <div class="flex justify-center items-center mb-6">
                            <span class="icon-large text-sky-700">üè≠</span>
                        </div>
                        <p class="mb-4">Grandes "granjas solares" que generan enormes cantidades de electricidad para la red, contribuyendo a la autosuficiencia energ√©tica y reducci√≥n de emisiones. China e India lideran este desarrollo.</p>
                        <div class="chart-container mx-auto h-72 md:h-96">
                            <canvas id="largeScalePlantsChart"></canvas>
                        </div>
                        <p class="text-center text-sm text-slate-500 mt-2">Capacidad instalada de algunas de las plantas solares m√°s grandes del mundo (MW).</p>
                        <div id="largeScalePlantsList" class="mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>
                    </div>

                    <div id="innovadoras" class="app-tab-content mt-6" style="display:none;">
                        <h3 class="text-2xl font-semibold text-sky-600 mb-3">Aplicaciones Innovadoras</h3>
                        <div class="flex justify-center items-center mb-6">
                            <span class="icon-large text-amber-700">üí°</span>
                        </div>
                        <p class="mb-4">La industria solar busca constantemente integrar la tecnolog√≠a en nuestra vida e infraestructuras de formas novedosas:</p>
                        <ul class="list-disc list-inside space-y-3">
                            <li><strong>Integraci√≥n en Edificios (BIPV):</strong> Tejas solares, fachadas, ventanas fotovoltaicas. Generan energ√≠a y son parte del edificio.</li>
                            <li><strong>Carreteras Solares:</strong> Paneles en carreteras para alimentar alumbrado, se√±ales o cargar VEs.</li>
                            <li><strong>Energ√≠a Solar Flotante (Floating PV):</strong> Paneles sobre lagos o embalses. Ahorra terreno y puede aumentar eficiencia por refrigeraci√≥n.</li>
                            <li><strong>Agrivoltaica:</strong> Combinaci√≥n de agricultura y paneles solares en el mismo terreno.</li>
                            <li><strong>Transporte Solar:</strong> Veh√≠culos (coches, aviones) alimentados por energ√≠a solar.</li>
                            <li><strong>Dispositivos Port√°tiles:</strong> Cargadores, port√°tiles solares, etc.</li>
                        </ul>
                        <p class="mt-4 text-sm italic text-slate-500">Estas innovaciones no solo expanden el mercado, sino que ofrecen sinergias: la solar flotante reduce evaporaci√≥n, la BIPV mejora aislamiento, etc.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="sostenibilidad" class="content-section">
            <div class="bg-white shadow-xl rounded-lg p-6 mb-8">
                <h2 class="text-3xl font-bold text-sky-700 mb-4">Impacto Ambiental y Sostenibilidad</h2>
                <p class="text-lg mb-4">Aunque es una energ√≠a limpia en su operaci√≥n, es vital analizar el ciclo de vida completo de los paneles FV, desde su fabricaci√≥n hasta su reciclaje.</p>
                <div class="flex justify-center items-center mb-6">
                    <span class="icon-large text-emerald-600">‚ôªÔ∏è</span>
                </div>
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-sky-600 mb-2 text-center">Huella de Carbono Comparativa (g CO2eq/kWh)</h3>
                    <div class="chart-container mx-auto h-64 md:h-80">
                        <canvas id="carbonFootprintChart"></canvas>
                    </div>
                    <p class="text-center text-sm text-slate-500 mt-2">Comparaci√≥n aproximada de emisiones de CO2 por kWh. La solar FV es significativamente menor que los combustibles f√≥siles.</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-slate-50 p-5 rounded-lg shadow">
                        <h3 class="text-xl font-semibold text-sky-600 mb-2">An√°lisis del Ciclo de Vida (ACV)</h3>
                        <p class="text-sm text-slate-700 mb-2">Eval√∫a impactos desde la extracci√≥n de materias primas (silicio, vidrio, aluminio), fabricaci√≥n, transporte, uso, hasta el desmantelamiento y reciclaje.</p>
                        <p class="text-sm text-slate-700">Un panel FV recupera la energ√≠a usada en su fabricaci√≥n en <strong class="text-emerald-600">6 meses a 1.4 a√±os</strong>, y produce energ√≠a limpia por m√°s del 95% de su vida √∫til (>30 a√±os).</p>
                    </div>
                     <div class="bg-slate-50 p-5 rounded-lg shadow">
                        <h3 class="text-xl font-semibold text-sky-600 mb-2">Gesti√≥n de Residuos y Reciclaje</h3>
                        <p class="text-sm text-slate-700 mb-2">Vida √∫til: 25-30 a√±os. Materiales altamente reciclables: vidrio (~85% del peso, 95% reciclable), aluminio (100%), silicio (85% recuperable).</p>
                        <p class="text-sm text-slate-700 mb-2"><strong>Desaf√≠os:</strong> Materiales t√≥xicos minoritarios (plomo, cadmio), falta de infraestructura de reciclaje especializada globalmente.</p>
                        <p class="text-sm text-slate-700"><strong>Procesos:</strong> Mec√°nico (trituraci√≥n), Qu√≠mico (disoluci√≥n), T√©rmico (quema de pol√≠meros).</p>
                        <p class="text-xs text-amber-700 mt-1">La econom√≠a circular es clave: transformar residuos en recursos.</p>
                    </div>
                    <div class="bg-slate-50 p-5 rounded-lg shadow">
                        <h3 class="text-xl font-semibold text-sky-600 mb-2">Impacto en Uso del Suelo y Biodiversidad</h3>
                        <p class="text-sm text-slate-700 mb-2">Grandes plantas pueden alterar ecosistemas. Deslumbramiento puede afectar aves.</p>
                        <p class="text-sm text-slate-700"><strong>Mitigaci√≥n:</strong> Agrivoltaica, pastoreo de ovejas, vallados permeables, creaci√≥n de refugios para fauna, uso de especies polinizadoras. Paneles pueden crear microclimas beneficiosos en zonas √°ridas.</p>
                    </div>
                </div>
                 <p class="mt-6 text-sm italic text-slate-500">La industria FV avanza hacia una sostenibilidad integral, mejorando fabricaci√≥n, reciclaje y mitigando impactos para ser verdaderamente ecol√≥gica de principio a fin.</p>
            </div>
        </section>

        <section id="economia" class="content-section">
            <div class="bg-white shadow-xl rounded-lg p-6 mb-8">
                <h2 class="text-3xl font-bold text-sky-700 mb-4">Aspectos Econ√≥micos y Rentabilidad</h2>
                <p class="text-lg mb-4">La viabilidad econ√≥mica de la energ√≠a solar ha mejorado dr√°sticamente, convirti√©ndola en una inversi√≥n atractiva. Los costos bajan, el retorno de la inversi√≥n (ROI) es favorable, y los ahorros en la factura el√©ctrica son significativos.</p>
                <div class="flex justify-center items-center mb-6">
                    <span class="icon-large text-green-600">üí∞</span>
                </div>
                <div class="mb-8">
                    <h3 class="text-xl font-semibold text-sky-600 mb-2 text-center">Comparativa Econ√≥mica (Estimaciones Espa√±a)</h3>
                    <div class="chart-container mx-auto h-72 md:h-96">
                        <canvas id="economicComparisonChart"></canvas>
                    </div>
                    <p class="text-center text-sm text-slate-500 mt-2">Costos de instalaci√≥n, ROI anual y tiempo de amortizaci√≥n estimados.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-xl font-semibold text-sky-600 mb-2">Costos de Instalaci√≥n</h3>
                        <ul class="list-disc list-inside text-sm text-slate-700 space-y-1">
                            <li><strong>Residencial (conectado a red, 6 paneles):</strong> Desde 5.100‚Ç¨.</li>
                            <li><strong>Residencial (aislado):</strong> +4.500‚Ç¨ a 8.200‚Ç¨ (por bater√≠as).</li>
                            <li><strong>Comercial (Espa√±a):</strong> 800-1.200 ‚Ç¨/kW. PYME (10kW): 8.000-12.000‚Ç¨. Gran empresa (>50kW): hasta 50.000‚Ç¨.</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-sky-600 mb-2">Retorno de Inversi√≥n (ROI) y Amortizaci√≥n</h3>
                        <ul class="list-disc list-inside text-sm text-slate-700 space-y-1">
                            <li><strong>Amortizaci√≥n general:</strong> 5-8 a√±os.</li>
                            <li><strong>Residencial (sin bater√≠as/ayudas):</strong> <5 a√±os, ROI >20%. Con bater√≠as: ~7 a√±os, ROI 14%.</li>
                            <li><strong>Empresas:</strong> ROI 15-25%, amortizaci√≥n <5 a√±os.</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-sky-600 mb-2">Ahorro y Compensaci√≥n</h3>
                         <p class="text-sm text-slate-700 mb-1">Reducci√≥n factura el√©ctrica: 50-90% (incluso 70-100% con optimizaci√≥n).</p>
                         <p class="text-sm text-slate-700">Compensaci√≥n de excedentes (venta a la red) incrementa ahorros.</p>
                    </div>
                     <div>
                        <h3 class="text-xl font-semibold text-sky-600 mb-2">Paridad de Red</h3>
                         <p class="text-sm text-slate-700">Punto donde el costo de generar energ√≠a solar es ‚â§ al de comprarla de la red. Ya alcanzada en muchos lugares.</p>
                    </div>
                </div>
                
                <div class="mt-8 bg-amber-50 p-5 rounded-lg shadow">
                    <h3 class="text-xl font-semibold text-amber-700 mb-2">Incentivos en Espa√±a üá™üá∏</h3>
                    <p class="text-sm text-slate-700 mb-2">Impulsan el autoconsumo. Incluyen:</p>
                    <ul class="list-disc list-inside text-sm text-slate-600 space-y-1">
                        <li><strong>Deducci√≥n IRPF:</strong> 20-60% seg√∫n mejora energ√©tica.</li>
                        <li><strong>Bonificaciones IBI/ICIO:</strong> 30-50% en muchos municipios.</li>
                        <li><strong>Subvenciones Auton√≥micas/Municipales:</strong> Activas hasta 2025/2030 en varias regiones.</li>
                        <li><strong>Autoconsumo Colectivo:</strong> Compartir energ√≠a entre vecinos.</li>
                    </ul>
                </div>
                <p class="mt-6 text-sm italic text-slate-500">La energ√≠a solar es una decisi√≥n econ√≥micamente inteligente. Las pol√≠ticas p√∫blicas son cruciales para acelerar su adopci√≥n masiva.</p>
            </div>
        </section>

        <section id="futuro" class="content-section">
            <div class="bg-white shadow-xl rounded-lg p-6 mb-8">
                <h2 class="text-3xl font-bold text-sky-700 mb-4">Tendencias Futuras e Innovaciones</h2>
                <p class="text-lg mb-4">El sector fotovoltaico est√° en constante evoluci√≥n, con avances que prometen sistemas a√∫n m√°s eficientes, accesibles y vers√°tiles.</p>
                <div class="flex justify-center items-center mb-6">
                    <span class="icon-large text-purple-600">üîÆ</span>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="card bg-sky-50 p-5 rounded-lg shadow">
                        <h3 class="text-xl font-semibold text-sky-600 mb-2">üöÄ Avances en Eficiencia y Costos</h3>
                        <p class="text-sm text-slate-700">Nuevos materiales y nanotecnolog√≠a (potencial >30% eficiencia). Producci√≥n a gran escala y competencia contin√∫an bajando precios.</p>
                    </div>
                    <div class="card bg-sky-50 p-5 rounded-lg shadow">
                        <h3 class="text-xl font-semibold text-sky-600 mb-2">üîã Almacenamiento e IA</h3>
                        <p class="text-sm text-slate-700">Integraci√≥n de bater√≠as para suministro constante. IA para optimizar producci√≥n, mantenimiento predictivo y gesti√≥n energ√©tica inteligente.</p>
                    </div>
                    <div class="card bg-sky-50 p-5 rounded-lg shadow">
                        <h3 class="text-xl font-semibold text-sky-600 mb-2">üî¨ Nuevos Materiales y Dise√±os</h3>
                        <ul class="list-disc list-inside text-sm text-slate-600 space-y-1 mt-1">
                            <li><strong>C√©lulas de Perovskita:</strong> M√°s eficientes y econ√≥micas, potencial para ropa inteligente, veh√≠culos. (Durabilidad en mejora).</li>
                            <li><strong>Paneles Flexibles y Transparentes:</strong> Integraci√≥n en fachadas, veh√≠culos, electr√≥nica.</li>
                            <li><strong>Paneles Infrarrojos:</strong> Convierten luz infrarroja (penetra nubes), viables en regiones menos soleadas.</li>
                            <li><strong>Tejas Solares:</strong> Est√©tica integrada en tejados.</li>
                        </ul>
                    </div>
                    <div class="card bg-sky-50 p-5 rounded-lg shadow col-span-1 md:col-span-2 lg:col-span-3">
                        <h3 class="text-xl font-semibold text-sky-600 mb-2">üåç Expansi√≥n de Aplicaciones Emergentes</h3>
                        <p class="text-sm text-slate-700">Continuar√° crecimiento de BIPV, carreteras solares, solar flotante, agrivoltaica. Desarrollo de microredes solares para comunidades remotas. Nuevos modelos de negocio (alquiler de paneles).</p>
                    </div>
                </div>
                <p class="mt-6 text-sm italic text-slate-500">La convergencia tecnol√≥gica (IA, almacenamiento) y la investigaci√≥n fundamental en materiales est√°n redefiniendo los l√≠mites de la energ√≠a solar, haci√©ndola m√°s inteligente, aut√≥noma y omnipresente.</p>
            </div>
        </section>

        <section id="contacto" class="content-section">
            <div class="bg-white shadow-xl rounded-lg p-6 mb-8">
                <h2 class="text-3xl font-bold text-sky-700 mb-4">Contacto üìß</h2>
                <p class="text-lg mb-4">¬øTienes preguntas, sugerencias o quieres colaborar? ¬°Nos encantar√≠a escucharte!</p>
                <p class="mb-4 text-slate-700">Rellena el siguiente formulario y, al enviarlo, se abrir√° tu cliente de correo electr√≥nico predeterminado con tu mensaje listo para ser enviado a nuestra direcci√≥n.</p>
                
                <form id="contactForm" onsubmit="sendEmail(event)">
                    <div class="mb-4">
                        <label for="contactName" class="block text-slate-700 text-sm font-bold mb-2">Tu Nombre:</label>
                        <input type="text" id="contactName" class="shadow appearance-none border rounded w-full py-2 px-3 text-slate-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Tu nombre" required>
                    </div>
                    <div class="mb-4">
                        <label for="contactEmail" class="block text-slate-700 text-sm font-bold mb-2">Tu Correo Electr√≥nico:</label>
                        <input type="email" id="contactEmail" class="shadow appearance-none border rounded w-full py-2 px-3 text-slate-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="tu.email@ejemplo.com" required>
                    </div>
                    <div class="mb-6">
                        <label for="contactMessage" class="block text-slate-700 text-sm font-bold mb-2">Tu Mensaje:</label>
                        <textarea id="contactMessage" class="shadow appearance-none border rounded w-full py-2 px-3 text-slate-700 leading-tight focus:outline-none focus:shadow-outline resize-y h-40" placeholder="Escribe tu mensaje aqu√≠..." required></textarea>
                    </div>
                    <button type="submit" class="bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:shadow-outline transition duration-300 ease-in-out">
                        Enviar Mensaje
                    </button>
                </form>
                <p id="formMessage" class="mt-4 text-sm text-emerald-600 hidden">¬°Mensaje listo! Se abrir√° tu cliente de correo.</p>
            </div>
        </section>

    </main>

    <footer class="bg-sky-800 text-sky-100 text-center p-6 mt-8">
        <p>&copy; 2024 Explorador Interactivo de Paneles Fotovoltaicos.</p>
        <p class="text-xs mt-1">Aplicaci√≥n generada para fines ilustrativos y educativos.</p>
    </footer>
    
    <script>
        const navLinks = document.querySelectorAll('.nav-link');
        const contentSections = document.querySelectorAll('.content-section');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        // Function to set the active content section and navigation link
        function setActiveSection(sectionId) {
            contentSections.forEach(section => {
                if (section.id === sectionId) {
                    section.classList.add('active');
                } else {
                    section.classList.remove('active');
                }
            });
            navLinks.forEach(link => {
                if (link.dataset.section === sectionId) {
                    link.classList.add('active');
                     if (link.closest('#mobile-menu')) {
                        link.classList.add('bg-sky-600', 'text-white');
                    }
                } else {
                    link.classList.remove('active');
                    if (link.closest('#mobile-menu')) {
                        link.classList.remove('bg-sky-600', 'text-white');
                    }
                }
            });
            // Scroll to the top of the page when changing sections
            window.scrollTo(0, 0);
        }
        
        // Add event listeners to navigation links for smooth scrolling and section activation
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = e.target.dataset.section;
                setActiveSection(sectionId);
                // Close mobile menu after selection
                if (mobileMenu.classList.contains('block')) {
                    mobileMenu.classList.remove('block');
                    mobileMenu.classList.add('hidden');
                }
            });
        });

        // Toggle mobile menu visibility
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
            mobileMenu.classList.toggle('block');
        });
        
        // Function to handle tab switching within sections (e.g., Applications)
        function openAppTab(evt, tabName) {
            let i, tabcontent, tablinks;
            // Get all tab content elements within the same parent
            tabcontent = evt.currentTarget.closest('.mb-6').querySelectorAll(".app-tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            // Get all tab buttons within the same parent
            tablinks = evt.currentTarget.parentElement.querySelectorAll(".tab-button");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].classList.remove("active");
            }
            // Display the selected tab content and set the button as active
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.classList.add("active");
        }

        // Data for different panel types (image URLs removed, using only text/emojis)
        const panelTypesData = [
            { name: "Monocristalino", material: "Silicio puro", features: "Estructura uniforme, color negro/azul oscuro, bordes redondeados", efficiency: "18-25%", lifespan: "25+", cost: "Alto", applications: "Espacio limitado (residencial/comercial), zonas de radiaci√≥n variable, proyectos de alto rendimiento", advantages: "Alta eficiencia, mejor rendimiento en poca luz/altas temperaturas, larga vida √∫til", challenges: "Mayor costo inicial", efficiency_min: 18, efficiency_max: 25, lifespan_val: 25, icon: "üíé" },
            { name: "Policristalino", material: "Fragmentos de silicio fundido", features: "Estructura menos uniforme, color azul, patr√≥n irregular", efficiency: "15-20%", lifespan: "~20", cost: "Medio", applications: "Desplazado, pero viable con espacio abundante", advantages: "Menor costo de producci√≥n", challenges: "Menor eficiencia, mayor degradaci√≥n", efficiency_min: 15, efficiency_max: 20, lifespan_val: 20, icon: "üß©" },
            { name: "Pel√≠cula Delgada (Amorfo)", material: "Silicio amorfo", features: "Estructura irregular, flexible, ligero, sobre sustratos flexibles", efficiency: "6-13%", lifespan: "10-15", cost: "Bajo", applications: "Aplicaciones espec√≠ficas (techos curvos, veh√≠culos, fachadas), poca luz/sombra", advantages: "Flexibilidad, ligereza, integraci√≥n arquitect√≥nica, mejor coeficiente de temperatura", challenges: "Baja eficiencia, requiere m√°s espacio, mayor degradaci√≥n", efficiency_min: 6, efficiency_max: 13, lifespan_val: 12, icon: "üéûÔ∏è" },
            { name: "Perovskita", material: "Perovskita", features: "Propiedades √≥pticas/electr√≥nicas ideales, eficiente transporte de electrones", efficiency: "Hasta 24% (t√°ndem), 45-50% (multiuni√≥n lab)", lifespan: "En desarrollo", cost: "Potencialmente bajo", applications: "No tradicionales (ropa inteligente, veh√≠culos), integraci√≥n arquitect√≥nica", advantages: "Alta eficiencia, bajo costo de producci√≥n, flexibilidad, ligereza, adaptabilidad", challenges: "Durabilidad limitada (fuga de yodo), uso de plomo (se investigan alternativas)", efficiency_min: 20, efficiency_max: 24, lifespan_val: 5, icon: "üß™" },
            { name: "Telururo de Cadmio (CdTe)", material: "CdTe", features: "Pel√≠cula delgada, heterouni√≥n p-n, sin marco de aluminio, TCO", efficiency: "Hasta 19%", lifespan: "Larga", cost: "Bajo", applications: "Aviones espaciales, granjas solares en climas c√°lidos, techos de VE", advantages: "Bajo costo de fabricaci√≥n, mejor coeficiente de temperatura, utiliza luz dispersa", challenges: "Requiere m√°s espacio por kW", efficiency_min: 15, efficiency_max: 19, lifespan_val: 20, icon: "‚öõÔ∏è" },
            { name: "CIGS", material: "Cobre, Indio, Galio, Selenio", features: "Pel√≠cula delgada", efficiency: "\"Bastante decente\"", lifespan: "N/A", cost: "N/A", applications: "Fachadas, ventanas, aplicaciones espaciales", advantages: "Facilidad de instalaci√≥n, flexibilidad", challenges: "N/A", efficiency_min: 12, efficiency_max: 16, lifespan_val: 15, icon: "üî¨" },
            { name: "Bifacial", material: "Silicio (mono/poli)", features: "Captura luz por ambas caras (frontal y trasera), encapsulado vidrio-vidrio", efficiency: "Hasta 30% m√°s que monofaciales", lifespan: "30+", cost: "Ligeramente m√°s alto (disminuyendo)", applications: "Superficies reflectantes (nieve, techos blancos), toldos, p√©rgolas, autoconsumo industrial", advantages: "Mayor eficiencia, mejor aprovechamiento del espacio, mayor durabilidad, funciona a bajas temperaturas", challenges: "Mayor peso, montaje m√°s complejo (disminuyendo)", efficiency_min: 20, efficiency_max: 26, lifespan_val: 30, icon: "‚ÜîÔ∏è" }
        ];

        // Populate panel types cards with data and icons
        function populatePanelTypes() {
            const container = document.getElementById('panelTypesContainer');
            container.innerHTML = '';
            panelTypesData.forEach(panel => {
                const card = `
                    <div class="card bg-slate-50 p-5 rounded-lg shadow border border-slate-200 hover:shadow-lg cursor-pointer text-center" onclick="openPanelModal('${panel.name}')">
                        <span class="icon-medium text-sky-600">${panel.icon}</span>
                        <h3 class="text-xl font-semibold text-sky-700 mb-2">${panel.name}</h3>
                        <p class="text-sm text-slate-700 mb-1"><strong>Eficiencia:</strong> ${panel.efficiency}</p>
                        <p class="text-sm text-slate-700 mb-1"><strong>Vida √ötil:</strong> ${panel.lifespan} a√±os</p>
                        <p class="text-sm text-slate-700"><strong>Ideal para:</strong> ${panel.applications.substring(0,100)}...</p>
                        <div class="mt-3 text-right">
                            <span class="text-xs text-amber-600 font-semibold">Ver detalles &rarr;</span>
                        </div>
                    </div>
                `;
                container.innerHTML += card;
            });
        }
        
        // Open modal with detailed panel information
        function openPanelModal(panelName) {
            const panel = panelTypesData.find(p => p.name === panelName);
            if (panel) {
                document.getElementById('modalPanelName').innerText = panel.name;
                document.getElementById('modalPanelMaterial').innerText = panel.material;
                document.getElementById('modalPanelFeatures').innerText = panel.features;
                document.getElementById('modalPanelEfficiency').innerText = panel.efficiency;
                document.getElementById('modalPanelLifespan').innerText = panel.lifespan;
                document.getElementById('modalPanelCost').innerText = panel.cost;
                document.getElementById('modalPanelApplications').innerText = panel.applications;
                document.getElementById('modalPanelAdvantages').innerText = panel.advantages;
                document.getElementById('modalPanelChallenges').innerText = panel.challenges;
                document.getElementById('panelDetailModal').style.display = 'block';
            }
        }

        // Close any given modal
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            const modal = document.getElementById('panelDetailModal');
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        // Data for large scale solar plants
        const largeScalePlantsData = [
            { name: "Parque Solar Bhadla (India)", capacity: 2245, area: "N/A", impact: "Redujo costo electricidad solar India." },
            { name: "Parque Solar Desierto de Tengger (China)", capacity: 1510, area: "43 km¬≤", impact: "Alimenta ~600.000 hogares." },
            { name: "Planta Villanueva (M√©xico)", capacity: 828, area: "24 km¬≤", impact: "M√°s grande de Am√©rica, alimenta ~1.2M hogares." },
            { name: "Parque Solar Noor (Marruecos)", capacity: 500, area: "30 km¬≤", impact: "M√°s grande de √Åfrica." },
            { name: "Estaci√≥n Solar Kamuthi (India)", capacity: 650, area: "N/A", impact: "Alimenta ~265.000 hogares." },
            { name: "Parque Solar Jinchuan (China)", capacity: 1030, area: "N/A", impact: "Alimenta miles de hogares." },
            { name: "Parque Ultra Mega Solar Kurnool (India)", capacity: 1000, area: "N/A", impact: "Alimenta casi toda el √°rea en horas pico." }
        ];

        // Populate large scale plants list
        function populateLargeScalePlants() {
            const container = document.getElementById('largeScalePlantsList');
            container.innerHTML = '';
            largeScalePlantsData.slice(0,6).forEach(plant => { // Show a few examples
                const card = `
                    <div class="card bg-white p-4 rounded-lg border border-slate-200 shadow">
                        <h4 class="font-semibold text-md text-sky-700">${plant.name}</h4>
                        <p class="text-sm text-slate-600"><strong>Capacidad:</strong> ${plant.capacity} MW</p>
                        <p class="text-sm text-slate-600"><strong>Impacto:</strong> ${plant.impact}</p>
                    </div>
                `;
                container.innerHTML += card;
            });
        }
        
        // Function to handle email sending via mailto link
        function sendEmail(event) {
            event.preventDefault(); // Prevent default form submission
            const name = document.getElementById('contactName').value;
            const email = document.getElementById('contactEmail').value;
            const message = document.getElementById('contactMessage').value;
            const formMessage = document.getElementById('formMessage');

            if (name && email && message) {
                const subject = encodeURIComponent(`Mensaje de ${name} desde Explorador Solar`);
                const body = encodeURIComponent(`Nombre: ${name}\nCorreo: ${email}\n\nMensaje:\n${message}`);
                window.location.href = `mailto:alegiacomelli@icloud.com?subject=${subject}&body=${body}`;
                formMessage.classList.remove('hidden');
                formMessage.innerText = '¬°Mensaje listo! Se abrir√° tu cliente de correo para enviarlo.';
                document.getElementById('contactForm').reset(); // Clear the form
            } else {
                formMessage.classList.remove('hidden');
                formMessage.classList.add('text-red-500');
                formMessage.innerText = 'Por favor, rellena todos los campos.';
            }
        }
        
        // Initialize the page and charts when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            setActiveSection('inicio'); // Set initial active section
            populatePanelTypes(); // Populate panel types cards
            populateLargeScalePlants(); // Populate large scale plants list

            // Add event listener for the contact form submission
            document.getElementById('contactForm').addEventListener('submit', sendEmail);

            // Chart.js for Panel Efficiency Comparison
            const panelEfficiencyCtx = document.getElementById('panelEfficiencyChart').getContext('2d');
            new Chart(panelEfficiencyCtx, {
                type: 'bar',
                data: {
                    labels: panelTypesData.map(p => p.name),
                    datasets: [{
                        label: 'Eficiencia M√≠nima (%)',
                        data: panelTypesData.map(p => p.efficiency_min),
                        backgroundColor: 'rgba(56, 189, 248, 0.6)', // sky-400
                        borderColor: 'rgba(14, 116, 144, 1)', // sky-700
                        borderWidth: 1
                    }, {
                        label: 'Eficiencia M√°xima (%)',
                        data: panelTypesData.map(p => p.efficiency_max),
                        backgroundColor: 'rgba(245, 158, 11, 0.6)', // amber-500
                        borderColor: 'rgba(180, 83, 9, 1)', // amber-700
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true, title: { display: true, text: 'Eficiencia (%)' } } },
                    plugins: { legend: { position: 'top' }, tooltip: { mode: 'index', intersect: false } }
                }
            });

            // Chart.js for Temperature Impact on Efficiency
            const temperatureEfficiencyCtx = document.getElementById('temperatureEfficiencyChart').getContext('2d');
            new Chart(temperatureEfficiencyCtx, {
                type: 'line',
                data: {
                    labels: ['15¬∞C', '20¬∞C', '25¬∞C (√ìptima)', '30¬∞C', '35¬∞C', '40¬∞C', '45¬∞C'],
                    datasets: [{
                        label: 'Eficiencia Relativa del Panel',
                        data: [101, 100.5, 100, 98, 96, 94, 92],
                        borderColor: 'rgb(245, 158, 11)',
                        backgroundColor: 'rgba(245, 158, 11, 0.1)',
                        fill: true,
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { title: { display: true, text: 'Eficiencia Relativa (%)' } } },
                    plugins: { legend: { display: false }, tooltip: { callbacks: { label: (context) => `${context.dataset.label}: ${context.parsed.y}%` } } }
                }
            });
            
            // Chart.js for Large Scale Plants Capacity
            const largeScalePlantsCtx = document.getElementById('largeScalePlantsChart').getContext('2d');
            new Chart(largeScalePlantsCtx, {
                type: 'bar',
                data: {
                    labels: largeScalePlantsData.map(p => p.name.split('(')[0].trim()), // Shorter names for labels
                    datasets: [{
                        label: 'Capacidad Instalada (MW)',
                        data: largeScalePlantsData.map(p => p.capacity),
                        backgroundColor: 'rgba(16, 185, 129, 0.6)', // emerald-500
                        borderColor: 'rgba(5, 150, 105, 1)', // emerald-700
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y', // Horizontal bar chart
                    scales: { x: { beginAtZero: true, title: { display: true, text: 'Capacidad (MW)' } } },
                    plugins: { legend: { display: false }, tooltip: { mode: 'index', intersect: false } }
                }
            });

            // Chart.js for Carbon Footprint Comparison
            const carbonFootprintCtx = document.getElementById('carbonFootprintChart').getContext('2d');
            new Chart(carbonFootprintCtx, {
                type: 'bar',
                data: {
                    labels: ['Carb√≥n', 'Gas Natural', 'Solar Fotovoltaica', 'Nuclear', 'E√≥lica'],
                    datasets: [{
                        label: 'g CO2eq / kWh',
                        data: [820, 490, 45, 12, 11], // Approximate values
                        backgroundColor: [
                            'rgba(107, 114, 128, 0.7)', // gray-500
                            'rgba(156, 163, 175, 0.7)', // gray-400
                            'rgba(251, 191, 36, 0.7)', // amber-400
                            'rgba(52, 211, 153, 0.7)', // emerald-400
                            'rgba(96, 165, 250, 0.7)'  // blue-400
                        ],
                        borderColor: [
                            'rgba(55, 65, 81, 1)', 
                            'rgba(107, 114, 128, 1)',
                            'rgba(217, 119, 6, 1)',
                            'rgba(16, 185, 129, 1)',
                            'rgba(59, 130, 246, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true, title: { display: true, text: 'Emisiones (g CO2eq/kWh)' } } },
                    plugins: { legend: { display: false }, tooltip: { mode: 'index', intersect: false } }
                }
            });

            // Data for Economic Comparison Chart
            const economicData = {
                labels: ['Residencial (Red)', 'Residencial (Aislado)', 'PYME', 'Gran Empresa'],
                costo: [5100, 9600, 10000, 50000], // Base estimations
                roi: [20, 14, 20, 20], // %
                amortizacion: [5, 7, 4, 4] // years
            };
            // Chart.js for Economic Comparison
            const economicComparisonCtx = document.getElementById('economicComparisonChart').getContext('2d');
            new Chart(economicComparisonCtx, {
                type: 'bar',
                data: {
                    labels: economicData.labels,
                    datasets: [
                        {
                            label: 'Costo Estimado (‚Ç¨)',
                            data: economicData.costo,
                            backgroundColor: 'rgba(239, 68, 68, 0.6)', // red-500
                            borderColor: 'rgba(185, 28, 28, 1)', // red-700
                            yAxisID: 'y',
                            order: 1
                        },
                        {
                            label: 'ROI Anual Estimado (%)',
                            data: economicData.roi,
                            backgroundColor: 'rgba(16, 185, 129, 0.6)', // emerald-500
                            borderColor: 'rgba(5, 150, 105, 1)', // emerald-700
                            yAxisID: 'y1',
                            order: 2
                        },
                        {
                            label: 'Amortizaci√≥n Estimada (a√±os)',
                            data: economicData.amortizacion,
                            backgroundColor: 'rgba(59, 130, 246, 0.6)', // blue-500
                            borderColor: 'rgba(37, 99, 235, 1)', // blue-700
                            yAxisID: 'y1',
                            order: 3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { type: 'linear', display: true, position: 'left', title: { display: true, text: 'Costo (‚Ç¨)' } },
                        y1: { type: 'linear', display: true, position: 'right', title: { display: true, text: 'ROI (%) / A√±os' }, grid: { drawOnChartArea: false } }
                    },
                    plugins: { legend: { position: 'top' }, tooltip: { mode: 'index', intersect: false } }
                }
            });
        });
    </script>
</body>
</html>
